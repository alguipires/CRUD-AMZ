version: "3.8"
x-app: &app
  build:
    context: .
    dockerfile: Dockerfile
  volumes:
    - ".:/var/www/html"
  depends_on:
    - db
  networks:
    - app-network

services:
  web:
    <<: *app
    ports:
      - "8000:80"
    networks:
      - netcrud

  db:
    image: mysql:8-debian
    volumes:
      - "db-data:/var/lib/mysql"
      - "./app/Database/crud.sql:/docker-entrypoint-initdb.d/crud.sql"
    # build: ./db
    # volumes:
    #   - "db-data:/var/lib/mysql"
    environment:
      - MYSQL_ROOT_PASSWORD=abc123
    networks:
      - netcrud

volumes:
  db-data:
    driver: local

networks:
  netcrud:
    driver: bridge